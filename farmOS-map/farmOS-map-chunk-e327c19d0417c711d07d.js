(self.webpackChunk_farmos_org_farmos_map=self.webpackChunk_farmos_org_farmos_map||[]).push([[92],{1868:(e,t,a)=>{"use strict";a.r(t),a.d(t,{startMeasure:()=>y,stopMeasure:()=>h,default:()=>L});var n=a(6481),r=a(4538),o=a(5265),s=a(6834),i=a(3945);const d={},c=[];let f,u,l,m=0;function g(e){let t=e.getId();return t||(t=`measureFeature${m}`,e.setId(t),m+=1),t}function I(e,t){const a=(0,i.Yt)(t,l);let n;t instanceof o.ZP&&(n=t.getInteriorPoint().getCoordinates()),t instanceof r.Z&&(n=t.getLastCoordinate()),e.setPosition(n),e.getElement().innerHTML=a}function p(e){const t=g(e),a=document.createElement("div");a.className="ol-tooltip ol-tooltip-measure",d[t]=new n.default({element:a,offset:[0,-15],positioning:"bottom-center",stopEvent:!1}),f.addOverlay(d[t]),I(d[t],e.getGeometry())}function y(e){const t=g(e);d[t]||p(e),c[t]=e.getGeometry().on("change",(e=>I(d[t],e.target)))}function h(e=!1){c.forEach((e=>(0,s.unByKey)(e))),Object.keys(d).forEach((t=>{u.getSource().getFeatureById(t)||e&&e.getId()===t||(f.removeOverlay(d[t]),delete d[t])}))}const L={attach(e,t={}){({map:f,units:l}=e),({layer:u}=t),u.getSource().getFeatures().forEach((e=>{p(e)})),e.edit&&(e.edit.addInteractionListener("drawstart",((e,t)=>{y(t.feature)})),e.edit.addInteractionListener("drawend",((e,t)=>{h(t.feature)})),e.edit.addInteractionListener("modifystart",((e,t)=>{t.features.forEach((e=>{y(e)}))})),e.edit.addInteractionListener("modifyend",(()=>{h()})),e.edit.addInteractionListener("translatestart",((e,t)=>{t.features.forEach((e=>{y(e)}))})),e.edit.addInteractionListener("translateend",(()=>{h()})),e.edit.addInteractionListener("delete",(()=>{h()})),e.edit.addInteractionListener("disable",(()=>{h()})))}}}}]);